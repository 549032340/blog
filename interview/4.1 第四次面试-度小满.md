# 4.1 5 : 00 - 5 : 40 第四次面试-度小满

- 介绍一下自己，介绍一下最近的项目，你负责那部分
- 碰到过什么问题，如何解决的
- 有没有什么值得分享的东西（项目经验、知识等）
  - 实现大文件切片上传
    - 首先引出问题，因为文件过大造成上传速度特别慢
    - 然后通过file的splice API 对文件进行切片处理
    - 然后将文件的片段通过接口上传给后台，但是文件切片数量过多的话，一次性调用所有接口就不合适了
    - 通过一个变量对接口的调用数量实现限制，就像一个限流管道一样，我设定的上限是3，每次最多只能同时调用三个接口，调用时++，调用完成--，实现对接口调用的限流
    - 还有就是对这个功能进行了一些扩展，将每个文件切片根据内容生成对应的hash值，通过后台比对实现断点续传，这个功能中还涉及到了接口调用的取消处理，axios的每个接口都有对应的cancelToken,然后根据对应的cancelTkoen通过axios的abort API实现取消。
    - 然后还是大文件切片问题，如果文件特别大，那么切片的过程会耗费不少时间，通过查询，发现HTML5有一个API叫做Web Worker，可以开启js子线程，用于一些复杂耗时的计算，然后我们将文件切片的过程和计算文件hash值的过程都放到了子线程中加快了整个流程的速度。
    - 还准备通过axios的 UpdateProgress API进行进度的获取处理来着，但是我们的项目没有这个需求，当时也就没做，但是实现的思路还是比较清晰的。

- 手写一个同心圆，并且可以闪烁呼吸效果

  - 实现一个圆只要width、height、border-radius一致即可

- BFC是什么，如何实现BFC、BFC的作用是什么

  **含义**

  - BFC(Block formatting context)直译为"块级格式化上下文"。它是一个独立的渲染区域，只有Block-level box参与， 它规定了内部的Block-level Box如何布局，并且与这个区域外部毫不相干。
  - BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。

  **实现**

  - float的值不是none
  - display的值是inline-block、table-cell、flex、table-caption或者inline-flex
  - position的值不是static或者relative
  - overflow的值不是visible

  **BFC的布局规则**

  - 内部的Box会在垂直方向，一个接一个地放置。
  - Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠。
  - 每个盒子（块盒与行盒）的margin box的左边，与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。
  - BFC的区域不会与float box重叠。
  - BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。
  - 计算BFC的高度时，浮动元素也参与计算。

  **作用**

  - 利用BFC避免margin重叠
  - 自适应两栏布局
  - BFC的区域不会与float box重叠
  - 清除浮动

- 浏览器的渲染流程

- 什么是重绘和回流，哪个更影响性能

  - 重绘是当节点需要更改外观而不会影响布局的，比如改变 `color` 就叫称为重绘
  - 回流是布局或者几何属性需要改变就称为回流。
  - 回流**必定**会发生重绘，重绘**不一定**会引发回流。回流所需的成本比重绘高的多，改变父节点里的子节点很可能会导致父节点的一系列回流。

- 如何减少重绘和回流

  **CSS中避免回流、重绘**

  - 尽可能在DOM树的最末端改变class
  - 避免设置多层内联样式
  - 动画效果应用到position属性为absolute或fixed的元素上
  - 避免使用table布局
  - 使用css3硬件加速，可以让`transform、opacity、filters`等动画效果不会引起回流重绘

  **JS操作避免回流、重绘**

  - 避免使用JS一个样式修改完接着改下一个样式，最好一次性更改CSS样式，或者将样式列表定义为class的名称
  - 避免频繁操作DOM，使用文档片段创建一个子树，然后再拷贝到文档中
  - 先隐藏元素，进行修改后再显示该元素，因为display:none上的DOM操作不会引发回流和重绘
  - 避免循环读取offsetLeft等属性，在循环之前把它们存起来
  - 对于复杂动画效果,使用绝对定位让其脱离文档流，否则会引起父元素及后续元素大量的回流

- 说一下vue组件之间的通信

- watch 和 computed 的区别

- 什么是继承，继承有几种方式

  - 寄生式继承、组合式继承...

- es6的新特性

- 说一下Promise的原理

  - 通过三种状态：fulfilled、rejected、pending实现对调用函数的结果表示，然后Promise的resolve、reject在执行完成之后会将Promise的this return出去，以此实现Promise的链式调用

- 手写防抖、节流、深拷贝